{"version":3,"file":"angular-disable-browser-back-button.js","sources":["ng:/angular-disable-browser-back-button/public_api.ts","ng:/angular-disable-browser-back-button/angular-disable-browser-back-button.ts"],"names":["tslib_1.__param"],"mappings":"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","sourcesContent":["import { NgModule, Injectable, ModuleWithProviders, Inject } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\n\nfunction _window(): any {\n  return window;\n}\n\n@Injectable()\nexport class WindowRef {\n  get nativeWindow(): any {\n    return _window();\n  }\n}\n\n@NgModule({\n  providers: [WindowRef]\n})\nexport class BackButtonDisableModule {\n\n  private window: Window;\n  private scrollX = 0;\n  private scrollY = 0;\n\n  constructor(\n    private router: Router,\n    private windowRef: WindowRef,\n    @Inject('preserveScrollPosition') private preserveScrollPosition: boolean\n  ) {\n    this.window = this.windowRef.nativeWindow\n    this.disableBackButton();\n    this.addPopStateEventListener();\n  }\n\n  static forRoot(config?: { preserveScrollPosition: boolean }): ModuleWithProviders {\n    return {\n      ngModule: BackButtonDisableModule,\n      providers: [\n        {\n          provide: 'preserveScrollPosition',\n          useValue: config && 'preserveScrollPosition' in config ? config.preserveScrollPosition : false\n        }\n      ]\n    }\n  }\n\n  private addPopStateEventListener(): void {\n    this.window.addEventListener('popstate', () => {\n      if (this.preserveScrollPosition) this.getScrollCoordinates();\n      this.window.history.pushState(null, null, null);\n      if (this.preserveScrollPosition) setTimeout(this.scrollToThePreviousPosition.bind(this));\n    });\n  }\n\n  private scrollToThePreviousPosition(): void {\n    this.window.scrollTo(this.scrollX, this.scrollY);\n  }\n\n  private getScrollCoordinates(): void {\n    this.scrollX = this.window.scrollX;\n    this.scrollY = this.window.scrollY;\n  }\n\n  private disableBackButton(): void {\n    this.window.history.pushState(null, null, null);\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.window.history.pushState(null, null, null);\n      };\n    });\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"]}